{% if site.heimspiele.size > 0 %}
<section id="heimspiele" class="py-5">
  <div class="container">

      
      <div class="col-12 text-center text-lg-start">
        <h3 class="cta-title">Wir laden ein zum Heimspiel!</h3>
        <p class="cta-text mb-1">
          In den kommenden Tagen spielen wir in Müllheim und freuen uns über jeden Zuschauer!
        </p>
      </div>

      {% assign heimspiele_sortiert = (site.heimspiele | sort: 'datetime') %}

      {% assign heimspiel_Section = '0' %}
      {% assign heimspiel_LeagueDateLocation = '0' %}
      {% assign heimspiel_Opponent = '0' %}

      {% for match in heimspiele_sortiert%}
        {% assign patch_SectionID = match.date | append: match.location_name | append: match.location_street %}
        {% assign patch_LeagueDateLocation = match.league | append: match.league | append: match.date | append: match.location_street %}
        {% assign patch_Opponent = match.league | append: match.league | append: match.date | append: match.location_street | append: match.opponent %}


        <!--
          new section if:
          - section id is different from last section id
        -->
        <!--
          close section if:
          - section id is different from last section id
          - but not 0
        -->
          {% unless heimspiel_Section contains patch_SectionID and heimspiel_Section == '0' %}
            </div>
          {% endunless %}
          {% unless heimspiel_Section contains patch_SectionID %}
              {% assign heimspiel_Section = heimspiel_Section | append: patch_SectionID %}
              {% assign gmaps_query = match.location_name | append: ',' | append: match.location_street | append: ',' | append: match.location_postal | append: ' ' | append: match.location_city %}

              <div class="box dark col-12 p-4 my-4">
                <h4 class="m-0">{{ match.date | date: "%d.%m" }}<span>{{ match.date | date: ".%Y" }}</span> in <a href="https://www.google.com/maps/search/?api=1&query={{ gmaps_query | url_encode }}" target="_blank" rel="noopener"><i class="fa-solid fa-map-marker-alt pe-2"></i>{{ match.location_name }}<span class="d-none d-md-inline">, {{ match.location_street }}</span></a></h4>
              
          {% endunless %}


            

          {% unless heimspiel_LeagueDateLocation contains patch_LeagueDateLocation %}
            <p class="mt-2 mb-0 pe-2"><strong>{{ match.league }}{% unless match.time == "00:00" %} ab {{ match.time }} Uhr{% endunless %}</strong></p>
          {% endunless %}
          {% assign heimspiel_LeagueDateLocation = heimspiel_LeagueDateLocation | append: patch_LeagueDateLocation %}

          {% unless heimspiel_Opponent contains patch_Opponent %}
            <p class="ms-3 mb-0">Gast: {{ match.opponent }}</p>
          {% endunless %}
          {% assign heimspiel_Opponent = heimspiel_Opponent | append: patch_Opponent %}


        {% endfor %}




  </div>
</section>

{% else %} <!-- fallback to always have a visual seperator between sections on the homepage -->
{% include home-corona-und-sport.html %}
{% endif %}